import{W as Ee,X as ni,A as lt,S as Ce,i as Be,s as De,Y as Re,E as ri,L as Ot,k as ct,l as ut,m as dt,h as O,Z as oe,_ as he,b as H,T as Wt,H as ai,I as oi,J as hi,Q as li,f as it,t as st,C as wi,$ as le,V as ot,a0 as _i,o as ci,M as ui,a1 as zi,a2 as di,a3 as Si,v as Tt,w as Ft,x as kt,y as Ct,a as qt,c as Yt,g as Ai,a4 as Ei,a5 as Ti,d as Fi,e as Le,p as ht,q as ce,r as ue,n as de,G as fe}from"../../chunks/index-454abe97.js";import{w as jt,d as ki}from"../../chunks/index-5eed206f.js";/* empty css                                                               *//**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const fi="143";const Ne=0,Ci=1,Ie=1,Bi=100,Di=204,Oi=205,Pi=3,mi=300,qe=1e3,Qt=1001,Ye=1002,Ri=1006,Li=1008,Ni=1009,Ii=1023,qi=3e3,Yi=0,et="srgb",yt="srgb-linear",ye=7680,Hi=519,He=35044;class me{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const s=this._listeners[t];if(s!==void 0){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const i=this._listeners[t.type];if(i!==void 0){t.target=this;const s=i.slice(0);for(let n=0,r=s.length;n<r;n++)s[n].call(this,t);t.target=null}}}const q=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function Ut(){const c=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(q[c&255]+q[c>>8&255]+q[c>>16&255]+q[c>>24&255]+"-"+q[t&255]+q[t>>8&255]+"-"+q[t>>16&15|64]+q[t>>24&255]+"-"+q[e&63|128]+q[e>>8&255]+"-"+q[e>>16&255]+q[e>>24&255]+q[i&255]+q[i>>8&255]+q[i>>16&255]+q[i>>24&255]).toLowerCase()}function U(c,t,e){return Math.max(t,Math.min(e,c))}function Wi(c,t){return(c%t+t)%t}function xe(c,t,e){return(1-e)*c+e*t}class Q{constructor(t=0,e=0){Q.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),s=Math.sin(e),n=this.x-t.x,r=this.y-t.y;return this.x=n*i-r*s+t.x,this.y=n*s+r*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,s,n,r,a,h,o){const l=this.elements;return l[0]=t,l[1]=s,l[2]=a,l[3]=e,l[4]=n,l[5]=h,l[6]=i,l[7]=r,l[8]=o,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,n=this.elements,r=i[0],a=i[3],h=i[6],o=i[1],l=i[4],u=i[7],f=i[2],m=i[5],d=i[8],p=s[0],x=s[3],y=s[6],A=s[1],z=s[4],S=s[7],_=s[2],b=s[5],M=s[8];return n[0]=r*p+a*A+h*_,n[3]=r*x+a*z+h*b,n[6]=r*y+a*S+h*M,n[1]=o*p+l*A+u*_,n[4]=o*x+l*z+u*b,n[7]=o*y+l*S+u*M,n[2]=f*p+m*A+d*_,n[5]=f*x+m*z+d*b,n[8]=f*y+m*S+d*M,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],a=t[5],h=t[6],o=t[7],l=t[8];return e*r*l-e*a*o-i*n*l+i*a*h+s*n*o-s*r*h}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],a=t[5],h=t[6],o=t[7],l=t[8],u=l*r-a*o,f=a*h-l*n,m=o*n-r*h,d=e*u+i*f+s*m;if(d===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return t[0]=u*p,t[1]=(s*o-l*i)*p,t[2]=(a*i-s*r)*p,t[3]=f*p,t[4]=(l*e-s*h)*p,t[5]=(s*n-a*e)*p,t[6]=m*p,t[7]=(i*h-o*e)*p,t[8]=(r*e-i*n)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,n,r,a){const h=Math.cos(n),o=Math.sin(n);return this.set(i*h,i*o,-i*(h*r+o*a)+r+t,-s*o,s*h,-s*(-o*r+h*a)+a+e,0,0,1),this}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.elements,n=s[0],r=s[3],a=s[6],h=s[1],o=s[4],l=s[7];return s[0]=e*n+i*h,s[3]=e*r+i*o,s[6]=e*a+i*l,s[1]=-i*n+e*h,s[4]=-i*r+e*o,s[7]=-i*a+e*l,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}function ji(c){for(let t=c.length-1;t>=0;--t)if(c[t]>65535)return!0;return!1}function We(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}function xt(c){return c<.04045?c*.0773993808:Math.pow(c*.9478672986+.0521327014,2.4)}function ae(c){return c<.0031308?c*12.92:1.055*Math.pow(c,.41666)-.055}const ge={[et]:{[yt]:xt},[yt]:{[et]:ae}},Z={legacyMode:!0,get workingColorSpace(){return yt},set workingColorSpace(c){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(c,t,e){if(this.legacyMode||t===e||!t||!e)return c;if(ge[t]&&ge[t][e]!==void 0){const i=ge[t][e];return c.r=i(c.r),c.g=i(c.g),c.b=i(c.b),c}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(c,t){return this.convert(c,this.workingColorSpace,t)},toWorkingColorSpace:function(c,t){return this.convert(c,t,this.workingColorSpace)}},pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},L={r:0,g:0,b:0},V={h:0,s:0,l:0},Kt={h:0,s:0,l:0};function be(c,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?c+(t-c)*6*e:e<1/2?t:e<2/3?c+(t-c)*6*(2/3-e):c}function $t(c,t){return t.r=c.r,t.g=c.g,t.b=c.b,t}class yi{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,e===void 0&&i===void 0?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=et){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Z.toWorkingColorSpace(this,e),this}setRGB(t,e,i,s=yt){return this.r=t,this.g=e,this.b=i,Z.toWorkingColorSpace(this,s),this}setHSL(t,e,i,s=yt){if(t=Wi(t,1),e=U(e,0,1),i=U(i,0,1),e===0)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,r=2*i-n;this.r=be(r,n,t+1/3),this.g=be(r,n,t),this.b=be(r,n,t-1/3)}return Z.toWorkingColorSpace(this,s),this}setStyle(t,e=et){function i(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let n;const r=s[1],a=s[2];switch(r){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,Z.toWorkingColorSpace(this,e),i(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,Z.toWorkingColorSpace(this,e),i(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const h=parseFloat(n[1])/360,o=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100;return i(n[4]),this.setHSL(h,o,l,e)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=s[1],r=n.length;if(r===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,Z.toWorkingColorSpace(this,e),this;if(r===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,Z.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=et){const i=pi[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=xt(t.r),this.g=xt(t.g),this.b=xt(t.b),this}copyLinearToSRGB(t){return this.r=ae(t.r),this.g=ae(t.g),this.b=ae(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=et){return Z.fromWorkingColorSpace($t(this,L),t),U(L.r*255,0,255)<<16^U(L.g*255,0,255)<<8^U(L.b*255,0,255)<<0}getHexString(t=et){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=yt){Z.fromWorkingColorSpace($t(this,L),e);const i=L.r,s=L.g,n=L.b,r=Math.max(i,s,n),a=Math.min(i,s,n);let h,o;const l=(a+r)/2;if(a===r)h=0,o=0;else{const u=r-a;switch(o=l<=.5?u/(r+a):u/(2-r-a),r){case i:h=(s-n)/u+(s<n?6:0);break;case s:h=(n-i)/u+2;break;case n:h=(i-s)/u+4;break}h/=6}return t.h=h,t.s=o,t.l=l,t}getRGB(t,e=yt){return Z.fromWorkingColorSpace($t(this,L),e),t.r=L.r,t.g=L.g,t.b=L.b,t}getStyle(t=et){return Z.fromWorkingColorSpace($t(this,L),t),t!==et?`color(${t} ${L.r} ${L.g} ${L.b})`:`rgb(${L.r*255|0},${L.g*255|0},${L.b*255|0})`}offsetHSL(t,e,i){return this.getHSL(V),V.h+=t,V.s+=e,V.l+=i,this.setHSL(V.h,V.s,V.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(V),t.getHSL(Kt);const i=xe(V.h,Kt.h,e),s=xe(V.s,Kt.s,e),n=xe(V.l,Kt.l,e);return this.setHSL(i,s,n),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}yi.NAMES=pi;let Mt;class vi{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Mt===void 0&&(Mt=We("canvas")),Mt.width=t.width,Mt.height=t.height;const i=Mt.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Mt}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=We("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height),n=s.data;for(let r=0;r<n.length;r++)n[r]=xt(n[r]/255)*255;return i.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(xt(e[i]/255)*255):e[i]=xt(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Ui{constructor(t=null){this.isSource=!0,this.uuid=Ut(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let n;if(Array.isArray(s)){n=[];for(let r=0,a=s.length;r<a;r++)s[r].isDataTexture?n.push(Me(s[r].image)):n.push(Me(s[r]))}else n=Me(s);i.url=n}return e||(t.images[this.uuid]=i),i}}function Me(c){return typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap?vi.getDataURL(c):c.data?{data:Array.from(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Xi=0;class vt extends me{constructor(t=vt.DEFAULT_IMAGE,e=vt.DEFAULT_MAPPING,i=Qt,s=Qt,n=Ri,r=Li,a=Ii,h=Ni,o=1,l=qi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Xi++}),this.uuid=Ut(),this.name="",this.source=new Ui(t),this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=s,this.magFilter=n,this.minFilter=r,this.anisotropy=o,this.format=a,this.internalFormat=null,this.type=h,this.offset=new Q(0,0),this.repeat=new Q(1,1),this.center=new Q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==mi)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case qe:t.x=t.x-Math.floor(t.x);break;case Qt:t.x=t.x<0?0:1;break;case Ye:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case qe:t.y=t.y-Math.floor(t.y);break;case Qt:t.y=t.y<0?0:1;break;case Ye:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}}vt.DEFAULT_IMAGE=null;vt.DEFAULT_MAPPING=mi;class Oe{constructor(t=0,e=0,i=0,s=1){Oe.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,n=this.w,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s+r[12]*n,this.y=r[1]*e+r[5]*i+r[9]*s+r[13]*n,this.z=r[2]*e+r[6]*i+r[10]*s+r[14]*n,this.w=r[3]*e+r[7]*i+r[11]*s+r[15]*n,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,s,n;const h=t.elements,o=h[0],l=h[4],u=h[8],f=h[1],m=h[5],d=h[9],p=h[2],x=h[6],y=h[10];if(Math.abs(l-f)<.01&&Math.abs(u-p)<.01&&Math.abs(d-x)<.01){if(Math.abs(l+f)<.1&&Math.abs(u+p)<.1&&Math.abs(d+x)<.1&&Math.abs(o+m+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const z=(o+1)/2,S=(m+1)/2,_=(y+1)/2,b=(l+f)/4,M=(u+p)/4,D=(d+x)/4;return z>S&&z>_?z<.01?(i=0,s=.707106781,n=.707106781):(i=Math.sqrt(z),s=b/i,n=M/i):S>_?S<.01?(i=.707106781,s=0,n=.707106781):(s=Math.sqrt(S),i=b/s,n=D/s):_<.01?(i=.707106781,s=.707106781,n=0):(n=Math.sqrt(_),i=M/n,s=D/n),this.set(i,s,n,e),this}let A=Math.sqrt((x-d)*(x-d)+(u-p)*(u-p)+(f-l)*(f-l));return Math.abs(A)<.001&&(A=1),this.x=(x-d)/A,this.y=(u-p)/A,this.z=(f-l)/A,this.w=Math.acos((o+m+y-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Xt{constructor(t=0,e=0,i=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=s}static slerpFlat(t,e,i,s,n,r,a){let h=i[s+0],o=i[s+1],l=i[s+2],u=i[s+3];const f=n[r+0],m=n[r+1],d=n[r+2],p=n[r+3];if(a===0){t[e+0]=h,t[e+1]=o,t[e+2]=l,t[e+3]=u;return}if(a===1){t[e+0]=f,t[e+1]=m,t[e+2]=d,t[e+3]=p;return}if(u!==p||h!==f||o!==m||l!==d){let x=1-a;const y=h*f+o*m+l*d+u*p,A=y>=0?1:-1,z=1-y*y;if(z>Number.EPSILON){const _=Math.sqrt(z),b=Math.atan2(_,y*A);x=Math.sin(x*b)/_,a=Math.sin(a*b)/_}const S=a*A;if(h=h*x+f*S,o=o*x+m*S,l=l*x+d*S,u=u*x+p*S,x===1-a){const _=1/Math.sqrt(h*h+o*o+l*l+u*u);h*=_,o*=_,l*=_,u*=_}}t[e]=h,t[e+1]=o,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,i,s,n,r){const a=i[s],h=i[s+1],o=i[s+2],l=i[s+3],u=n[r],f=n[r+1],m=n[r+2],d=n[r+3];return t[e]=a*d+l*u+h*m-o*f,t[e+1]=h*d+l*f+o*u-a*m,t[e+2]=o*d+l*m+a*f-h*u,t[e+3]=l*d-a*u-h*f-o*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,s=t._y,n=t._z,r=t._order,a=Math.cos,h=Math.sin,o=a(i/2),l=a(s/2),u=a(n/2),f=h(i/2),m=h(s/2),d=h(n/2);switch(r){case"XYZ":this._x=f*l*u+o*m*d,this._y=o*m*u-f*l*d,this._z=o*l*d+f*m*u,this._w=o*l*u-f*m*d;break;case"YXZ":this._x=f*l*u+o*m*d,this._y=o*m*u-f*l*d,this._z=o*l*d-f*m*u,this._w=o*l*u+f*m*d;break;case"ZXY":this._x=f*l*u-o*m*d,this._y=o*m*u+f*l*d,this._z=o*l*d+f*m*u,this._w=o*l*u-f*m*d;break;case"ZYX":this._x=f*l*u-o*m*d,this._y=o*m*u+f*l*d,this._z=o*l*d-f*m*u,this._w=o*l*u+f*m*d;break;case"YZX":this._x=f*l*u+o*m*d,this._y=o*m*u+f*l*d,this._z=o*l*d-f*m*u,this._w=o*l*u-f*m*d;break;case"XZY":this._x=f*l*u-o*m*d,this._y=o*m*u-f*l*d,this._z=o*l*d+f*m*u,this._w=o*l*u+f*m*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],s=e[4],n=e[8],r=e[1],a=e[5],h=e[9],o=e[2],l=e[6],u=e[10],f=i+a+u;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(l-h)*m,this._y=(n-o)*m,this._z=(r-s)*m}else if(i>a&&i>u){const m=2*Math.sqrt(1+i-a-u);this._w=(l-h)/m,this._x=.25*m,this._y=(s+r)/m,this._z=(n+o)/m}else if(a>u){const m=2*Math.sqrt(1+a-i-u);this._w=(n-o)/m,this._x=(s+r)/m,this._y=.25*m,this._z=(h+l)/m}else{const m=2*Math.sqrt(1+u-i-a);this._w=(r-s)/m,this._x=(n+o)/m,this._y=(h+l)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(U(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,s=t._y,n=t._z,r=t._w,a=e._x,h=e._y,o=e._z,l=e._w;return this._x=i*l+r*a+s*o-n*h,this._y=s*l+r*h+n*a-i*o,this._z=n*l+r*o+i*h-s*a,this._w=r*l-i*a-s*h-n*o,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,s=this._y,n=this._z,r=this._w;let a=r*t._w+i*t._x+s*t._y+n*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=r,this._x=i,this._y=s,this._z=n,this;const h=1-a*a;if(h<=Number.EPSILON){const m=1-e;return this._w=m*r+e*this._w,this._x=m*i+e*this._x,this._y=m*s+e*this._y,this._z=m*n+e*this._z,this.normalize(),this._onChangeCallback(),this}const o=Math.sqrt(h),l=Math.atan2(o,a),u=Math.sin((1-e)*l)/o,f=Math.sin(e*l)/o;return this._w=r*u+this._w*f,this._x=i*u+this._x*f,this._y=s*u+this._y*f,this._z=n*u+this._z*f,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),s=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(e*Math.cos(s),i*Math.sin(n),i*Math.cos(n),e*Math.sin(s))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class g{constructor(t=0,e=0,i=0){g.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(je.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(je.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,s=this.z,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6]*s,this.y=n[1]*e+n[4]*i+n[7]*s,this.z=n[2]*e+n[5]*i+n[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,n=t.elements,r=1/(n[3]*e+n[7]*i+n[11]*s+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*s+n[12])*r,this.y=(n[1]*e+n[5]*i+n[9]*s+n[13])*r,this.z=(n[2]*e+n[6]*i+n[10]*s+n[14])*r,this}applyQuaternion(t){const e=this.x,i=this.y,s=this.z,n=t.x,r=t.y,a=t.z,h=t.w,o=h*e+r*s-a*i,l=h*i+a*e-n*s,u=h*s+n*i-r*e,f=-n*e-r*i-a*s;return this.x=o*h+f*-n+l*-a-u*-r,this.y=l*h+f*-r+u*-n-o*-a,this.z=u*h+f*-a+o*-r-l*-n,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,s=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*s,this.y=n[1]*e+n[5]*i+n[9]*s,this.z=n[2]*e+n[6]*i+n[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,s=t.y,n=t.z,r=e.x,a=e.y,h=e.z;return this.x=s*h-n*a,this.y=n*r-i*h,this.z=i*a-s*r,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return we.copy(this).projectOnVector(t),this.sub(we)}reflect(t){return this.sub(we.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(U(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const we=new g,je=new Xt;class Zt{constructor(t=new g(1/0,1/0,1/0),e=new g(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,s=1/0,n=-1/0,r=-1/0,a=-1/0;for(let h=0,o=t.length;h<o;h+=3){const l=t[h],u=t[h+1],f=t[h+2];l<e&&(e=l),u<i&&(i=u),f<s&&(s=f),l>n&&(n=l),u>r&&(r=u),f>a&&(a=f)}return this.min.set(e,i,s),this.max.set(n,r,a),this}setFromBufferAttribute(t){let e=1/0,i=1/0,s=1/0,n=-1/0,r=-1/0,a=-1/0;for(let h=0,o=t.count;h<o;h++){const l=t.getX(h),u=t.getY(h),f=t.getZ(h);l<e&&(e=l),u<i&&(i=u),f<s&&(s=f),l>n&&(n=l),u>r&&(r=u),f>a&&(a=f)}return this.min.set(e,i,s),this.max.set(n,r,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=ft.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0)if(e&&i.attributes!=null&&i.attributes.position!==void 0){const n=i.attributes.position;for(let r=0,a=n.count;r<a;r++)ft.fromBufferAttribute(n,r).applyMatrix4(t.matrixWorld),this.expandByPoint(ft)}else i.boundingBox===null&&i.computeBoundingBox(),_e.copy(i.boundingBox),_e.applyMatrix4(t.matrixWorld),this.union(_e);const s=t.children;for(let n=0,r=s.length;n<r;n++)this.expandByObject(s[n],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ft),ft.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Lt),te.subVectors(this.max,Lt),wt.subVectors(t.a,Lt),_t.subVectors(t.b,Lt),zt.subVectors(t.c,Lt),nt.subVectors(_t,wt),rt.subVectors(zt,_t),mt.subVectors(wt,zt);let e=[0,-nt.z,nt.y,0,-rt.z,rt.y,0,-mt.z,mt.y,nt.z,0,-nt.x,rt.z,0,-rt.x,mt.z,0,-mt.x,-nt.y,nt.x,0,-rt.y,rt.x,0,-mt.y,mt.x,0];return!ze(e,wt,_t,zt,te)||(e=[1,0,0,0,1,0,0,0,1],!ze(e,wt,_t,zt,te))?!1:(ee.crossVectors(nt,rt),e=[ee.x,ee.y,ee.z],ze(e,wt,_t,zt,te))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return ft.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(ft).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:($[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),$[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),$[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),$[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),$[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),$[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),$[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),$[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints($),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const $=[new g,new g,new g,new g,new g,new g,new g,new g],ft=new g,_e=new Zt,wt=new g,_t=new g,zt=new g,nt=new g,rt=new g,mt=new g,Lt=new g,te=new g,ee=new g,pt=new g;function ze(c,t,e,i,s){for(let n=0,r=c.length-3;n<=r;n+=3){pt.fromArray(c,n);const a=s.x*Math.abs(pt.x)+s.y*Math.abs(pt.y)+s.z*Math.abs(pt.z),h=t.dot(pt),o=e.dot(pt),l=i.dot(pt);if(Math.max(-Math.max(h,o,l),Math.min(h,o,l))>a)return!1}return!0}const Zi=new Zt,ve=new g,ie=new g,Se=new g;class Vi{constructor(t=new g,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):Zi.setFromPoints(t).getCenter(i);let s=0;for(let n=0,r=t.length;n<r;n++)s=Math.max(s,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){Se.subVectors(t,this.center);const e=Se.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),s=(i-this.radius)*.5;this.center.add(Se.multiplyScalar(s/i)),this.radius+=s}return this}union(t){return this.center.equals(t.center)===!0?ie.set(0,0,1).multiplyScalar(t.radius):ie.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(ve.copy(t.center).add(ie)),this.expandByPoint(ve.copy(t.center).sub(ie)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}class K{constructor(){K.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,s,n,r,a,h,o,l,u,f,m,d,p,x){const y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=s,y[1]=n,y[5]=r,y[9]=a,y[13]=h,y[2]=o,y[6]=l,y[10]=u,y[14]=f,y[3]=m,y[7]=d,y[11]=p,y[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new K().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,s=1/St.setFromMatrixColumn(t,0).length(),n=1/St.setFromMatrixColumn(t,1).length(),r=1/St.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*r,e[9]=i[9]*r,e[10]=i[10]*r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,s=t.y,n=t.z,r=Math.cos(i),a=Math.sin(i),h=Math.cos(s),o=Math.sin(s),l=Math.cos(n),u=Math.sin(n);if(t.order==="XYZ"){const f=r*l,m=r*u,d=a*l,p=a*u;e[0]=h*l,e[4]=-h*u,e[8]=o,e[1]=m+d*o,e[5]=f-p*o,e[9]=-a*h,e[2]=p-f*o,e[6]=d+m*o,e[10]=r*h}else if(t.order==="YXZ"){const f=h*l,m=h*u,d=o*l,p=o*u;e[0]=f+p*a,e[4]=d*a-m,e[8]=r*o,e[1]=r*u,e[5]=r*l,e[9]=-a,e[2]=m*a-d,e[6]=p+f*a,e[10]=r*h}else if(t.order==="ZXY"){const f=h*l,m=h*u,d=o*l,p=o*u;e[0]=f-p*a,e[4]=-r*u,e[8]=d+m*a,e[1]=m+d*a,e[5]=r*l,e[9]=p-f*a,e[2]=-r*o,e[6]=a,e[10]=r*h}else if(t.order==="ZYX"){const f=r*l,m=r*u,d=a*l,p=a*u;e[0]=h*l,e[4]=d*o-m,e[8]=f*o+p,e[1]=h*u,e[5]=p*o+f,e[9]=m*o-d,e[2]=-o,e[6]=a*h,e[10]=r*h}else if(t.order==="YZX"){const f=r*h,m=r*o,d=a*h,p=a*o;e[0]=h*l,e[4]=p-f*u,e[8]=d*u+m,e[1]=u,e[5]=r*l,e[9]=-a*l,e[2]=-o*l,e[6]=m*u+d,e[10]=f-p*u}else if(t.order==="XZY"){const f=r*h,m=r*o,d=a*h,p=a*o;e[0]=h*l,e[4]=-u,e[8]=o*l,e[1]=f*u+p,e[5]=r*l,e[9]=m*u-d,e[2]=d*u-m,e[6]=a*l,e[10]=p*u+f}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Gi,t,Ji)}lookAt(t,e,i){const s=this.elements;return j.subVectors(t,e),j.lengthSq()===0&&(j.z=1),j.normalize(),at.crossVectors(i,j),at.lengthSq()===0&&(Math.abs(i.z)===1?j.x+=1e-4:j.z+=1e-4,j.normalize(),at.crossVectors(i,j)),at.normalize(),se.crossVectors(j,at),s[0]=at.x,s[4]=se.x,s[8]=j.x,s[1]=at.y,s[5]=se.y,s[9]=j.y,s[2]=at.z,s[6]=se.z,s[10]=j.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,n=this.elements,r=i[0],a=i[4],h=i[8],o=i[12],l=i[1],u=i[5],f=i[9],m=i[13],d=i[2],p=i[6],x=i[10],y=i[14],A=i[3],z=i[7],S=i[11],_=i[15],b=s[0],M=s[4],D=s[8],R=s[12],E=s[1],k=s[5],F=s[9],T=s[13],C=s[2],B=s[6],I=s[10],gt=s[14],bt=s[3],w=s[7],Y=s[11],W=s[15];return n[0]=r*b+a*E+h*C+o*bt,n[4]=r*M+a*k+h*B+o*w,n[8]=r*D+a*F+h*I+o*Y,n[12]=r*R+a*T+h*gt+o*W,n[1]=l*b+u*E+f*C+m*bt,n[5]=l*M+u*k+f*B+m*w,n[9]=l*D+u*F+f*I+m*Y,n[13]=l*R+u*T+f*gt+m*W,n[2]=d*b+p*E+x*C+y*bt,n[6]=d*M+p*k+x*B+y*w,n[10]=d*D+p*F+x*I+y*Y,n[14]=d*R+p*T+x*gt+y*W,n[3]=A*b+z*E+S*C+_*bt,n[7]=A*M+z*k+S*B+_*w,n[11]=A*D+z*F+S*I+_*Y,n[15]=A*R+z*T+S*gt+_*W,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],s=t[8],n=t[12],r=t[1],a=t[5],h=t[9],o=t[13],l=t[2],u=t[6],f=t[10],m=t[14],d=t[3],p=t[7],x=t[11],y=t[15];return d*(+n*h*u-s*o*u-n*a*f+i*o*f+s*a*m-i*h*m)+p*(+e*h*m-e*o*f+n*r*f-s*r*m+s*o*l-n*h*l)+x*(+e*o*u-e*a*m-n*r*u+i*r*m+n*a*l-i*o*l)+y*(-s*a*l-e*h*u+e*a*f+s*r*u-i*r*f+i*h*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],n=t[3],r=t[4],a=t[5],h=t[6],o=t[7],l=t[8],u=t[9],f=t[10],m=t[11],d=t[12],p=t[13],x=t[14],y=t[15],A=u*x*o-p*f*o+p*h*m-a*x*m-u*h*y+a*f*y,z=d*f*o-l*x*o-d*h*m+r*x*m+l*h*y-r*f*y,S=l*p*o-d*u*o+d*a*m-r*p*m-l*a*y+r*u*y,_=d*u*h-l*p*h-d*a*f+r*p*f+l*a*x-r*u*x,b=e*A+i*z+s*S+n*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/b;return t[0]=A*M,t[1]=(p*f*n-u*x*n-p*s*m+i*x*m+u*s*y-i*f*y)*M,t[2]=(a*x*n-p*h*n+p*s*o-i*x*o-a*s*y+i*h*y)*M,t[3]=(u*h*n-a*f*n-u*s*o+i*f*o+a*s*m-i*h*m)*M,t[4]=z*M,t[5]=(l*x*n-d*f*n+d*s*m-e*x*m-l*s*y+e*f*y)*M,t[6]=(d*h*n-r*x*n-d*s*o+e*x*o+r*s*y-e*h*y)*M,t[7]=(r*f*n-l*h*n+l*s*o-e*f*o-r*s*m+e*h*m)*M,t[8]=S*M,t[9]=(d*u*n-l*p*n-d*i*m+e*p*m+l*i*y-e*u*y)*M,t[10]=(r*p*n-d*a*n+d*i*o-e*p*o-r*i*y+e*a*y)*M,t[11]=(l*a*n-r*u*n-l*i*o+e*u*o+r*i*m-e*a*m)*M,t[12]=_*M,t[13]=(l*p*s-d*u*s+d*i*f-e*p*f-l*i*x+e*u*x)*M,t[14]=(d*a*s-r*p*s-d*i*h+e*p*h+r*i*x-e*a*x)*M,t[15]=(r*u*s-l*a*s+l*i*h-e*u*h-r*i*f+e*a*f)*M,this}scale(t){const e=this.elements,i=t.x,s=t.y,n=t.z;return e[0]*=i,e[4]*=s,e[8]*=n,e[1]*=i,e[5]*=s,e[9]*=n,e[2]*=i,e[6]*=s,e[10]*=n,e[3]*=i,e[7]*=s,e[11]*=n,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),s=Math.sin(e),n=1-i,r=t.x,a=t.y,h=t.z,o=n*r,l=n*a;return this.set(o*r+i,o*a-s*h,o*h+s*a,0,o*a+s*h,l*a+i,l*h-s*r,0,o*h-s*a,l*h+s*r,n*h*h+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,s,n,r){return this.set(1,i,n,0,t,1,r,0,e,s,1,0,0,0,0,1),this}compose(t,e,i){const s=this.elements,n=e._x,r=e._y,a=e._z,h=e._w,o=n+n,l=r+r,u=a+a,f=n*o,m=n*l,d=n*u,p=r*l,x=r*u,y=a*u,A=h*o,z=h*l,S=h*u,_=i.x,b=i.y,M=i.z;return s[0]=(1-(p+y))*_,s[1]=(m+S)*_,s[2]=(d-z)*_,s[3]=0,s[4]=(m-S)*b,s[5]=(1-(f+y))*b,s[6]=(x+A)*b,s[7]=0,s[8]=(d+z)*M,s[9]=(x-A)*M,s[10]=(1-(f+p))*M,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){const s=this.elements;let n=St.set(s[0],s[1],s[2]).length();const r=St.set(s[4],s[5],s[6]).length(),a=St.set(s[8],s[9],s[10]).length();this.determinant()<0&&(n=-n),t.x=s[12],t.y=s[13],t.z=s[14],G.copy(this);const o=1/n,l=1/r,u=1/a;return G.elements[0]*=o,G.elements[1]*=o,G.elements[2]*=o,G.elements[4]*=l,G.elements[5]*=l,G.elements[6]*=l,G.elements[8]*=u,G.elements[9]*=u,G.elements[10]*=u,e.setFromRotationMatrix(G),i.x=n,i.y=r,i.z=a,this}makePerspective(t,e,i,s,n,r){const a=this.elements,h=2*n/(e-t),o=2*n/(i-s),l=(e+t)/(e-t),u=(i+s)/(i-s),f=-(r+n)/(r-n),m=-2*r*n/(r-n);return a[0]=h,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=o,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,s,n,r){const a=this.elements,h=1/(e-t),o=1/(i-s),l=1/(r-n),u=(e+t)*h,f=(i+s)*o,m=(r+n)*l;return a[0]=2*h,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*o,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const St=new g,G=new K,Gi=new g(0,0,0),Ji=new g(1,1,1),at=new g,se=new g,j=new g,Ue=new K,Xe=new Xt;class Vt{constructor(t=0,e=0,i=0,s=Vt.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,s=this._order){return this._x=t,this._y=e,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const s=t.elements,n=s[0],r=s[4],a=s[8],h=s[1],o=s[5],l=s[9],u=s[2],f=s[6],m=s[10];switch(e){case"XYZ":this._y=Math.asin(U(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,m),this._z=Math.atan2(-r,n)):(this._x=Math.atan2(f,o),this._z=0);break;case"YXZ":this._x=Math.asin(-U(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(h,o)):(this._y=Math.atan2(-u,n),this._z=0);break;case"ZXY":this._x=Math.asin(U(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-u,m),this._z=Math.atan2(-r,o)):(this._y=0,this._z=Math.atan2(h,n));break;case"ZYX":this._y=Math.asin(-U(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(h,n)):(this._x=0,this._z=Math.atan2(-r,o));break;case"YZX":this._z=Math.asin(U(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-l,o),this._y=Math.atan2(-u,n)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-U(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(f,o),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-l,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return Ue.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ue,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Xe.setFromEuler(this),this.setFromQuaternion(Xe,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Vt.DefaultOrder="XYZ";Vt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Qi{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Ki=0;const Ze=new g,At=new Xt,tt=new K,ne=new g,Nt=new g,$i=new g,ts=new Xt,Ve=new g(1,0,0),Ge=new g(0,1,0),Je=new g(0,0,1),es={type:"added"},Qe={type:"removed"};class Pt extends me{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ki++}),this.uuid=Ut(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Pt.DefaultUp.clone();const t=new g,e=new Vt,i=new Xt,s=new g(1,1,1);function n(){i.setFromEuler(e,!1)}function r(){e.setFromQuaternion(i,void 0,!1)}e._onChange(n),i._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new K},normalMatrix:{value:new Rt}}),this.matrix=new K,this.matrixWorld=new K,this.matrixAutoUpdate=Pt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Qi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return At.setFromAxisAngle(t,e),this.quaternion.multiply(At),this}rotateOnWorldAxis(t,e){return At.setFromAxisAngle(t,e),this.quaternion.premultiply(At),this}rotateX(t){return this.rotateOnAxis(Ve,t)}rotateY(t){return this.rotateOnAxis(Ge,t)}rotateZ(t){return this.rotateOnAxis(Je,t)}translateOnAxis(t,e){return Ze.copy(t).applyQuaternion(this.quaternion),this.position.add(Ze.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Ve,t)}translateY(t){return this.translateOnAxis(Ge,t)}translateZ(t){return this.translateOnAxis(Je,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(tt.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?ne.copy(t):ne.set(t,e,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Nt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tt.lookAt(Nt,ne,this.up):tt.lookAt(ne,Nt,this.up),this.quaternion.setFromRotationMatrix(tt),s&&(tt.extractRotation(s.matrixWorld),At.setFromRotationMatrix(tt),this.quaternion.premultiply(At.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(es)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Qe)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Qe)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),tt.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),tt.multiply(t.parent.matrixWorld)),t.applyMatrix4(tt),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,s=this.children.length;i<s;i++){const r=this.children[i].getObjectByProperty(t,e);if(r!==void 0)return r}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nt,t,$i),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nt,ts,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const s=this.children;for(let n=0,r=s.length;n<r;n++)s[n].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function n(a,h){return a[h.uuid]===void 0&&(a[h.uuid]=h.toJSON(t)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=n(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const h=a.shapes;if(Array.isArray(h))for(let o=0,l=h.length;o<l;o++){const u=h[o];n(t.shapes,u)}else n(t.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let h=0,o=this.material.length;h<o;h++)a.push(n(t.materials,this.material[h]));s.material=a}else s.material=n(t.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const h=this.animations[a];s.animations.push(n(t.animations,h))}}if(e){const a=r(t.geometries),h=r(t.materials),o=r(t.textures),l=r(t.images),u=r(t.shapes),f=r(t.skeletons),m=r(t.animations),d=r(t.nodes);a.length>0&&(i.geometries=a),h.length>0&&(i.materials=h),o.length>0&&(i.textures=o),l.length>0&&(i.images=l),u.length>0&&(i.shapes=u),f.length>0&&(i.skeletons=f),m.length>0&&(i.animations=m),d.length>0&&(i.nodes=d)}return i.object=s,i;function r(a){const h=[];for(const o in a){const l=a[o];delete l.metadata,h.push(l)}return h}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const s=t.children[i];this.add(s.clone())}return this}}Pt.DefaultUp=new g(0,1,0);Pt.DefaultMatrixAutoUpdate=!0;let is=0;class ss extends me{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:is++}),this.uuid=Ut(),this.name="",this.type="Material",this.blending=Ie,this.side=Ne,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Di,this.blendDst=Oi,this.blendEquation=Bi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Pi,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Hi,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ye,this.stencilZFail=ye,this.stencilZPass=ye,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===Ci;continue}const s=this[e];if(s===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ie&&(i.blending=this.blending),this.side!==Ne&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function s(n){const r=[];for(const a in n){const h=n[a];delete h.metadata,r.push(h)}return r}if(e){const n=s(t.textures),r=s(t.images);n.length>0&&(i.textures=n),r.length>0&&(i.images=r)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const s=e.length;i=new Array(s);for(let n=0;n!==s;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}const P=new g,re=new Q;class Dt{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i===!0,this.usage=He,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,n=this.itemSize;s<n;s++)this.array[t+s]=e.array[i+s];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let r=t[s];r===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),r=new yi),e[i++]=r.r,e[i++]=r.g,e[i++]=r.b}return this}copyVector2sArray(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let r=t[s];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),r=new Q),e[i++]=r.x,e[i++]=r.y}return this}copyVector3sArray(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let r=t[s];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),r=new g),e[i++]=r.x,e[i++]=r.y,e[i++]=r.z}return this}copyVector4sArray(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let r=t[s];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),r=new Oe),e[i++]=r.x,e[i++]=r.y,e[i++]=r.z,e[i++]=r.w}return this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)re.fromBufferAttribute(this,e),re.applyMatrix3(t),this.setXY(e,re.x,re.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)P.fromBufferAttribute(this,e),P.applyMatrix3(t),this.setXYZ(e,P.x,P.y,P.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)P.fromBufferAttribute(this,e),P.applyMatrix4(t),this.setXYZ(e,P.x,P.y,P.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)P.fromBufferAttribute(this,e),P.applyNormalMatrix(t),this.setXYZ(e,P.x,P.y,P.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)P.fromBufferAttribute(this,e),P.transformDirection(t),this.setXYZ(e,P.x,P.y,P.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,e,i,s,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=n,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==He&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}}class ns extends Dt{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class rs extends Dt{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class as extends Dt{constructor(t,e,i){super(new Float32Array(t),e,i)}}let os=0;const X=new K,Ae=new Pt,Et=new g,v=new Zt,It=new Zt,N=new g;class Pe extends me{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:os++}),this.uuid=Ut(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ji(t)?rs:ns)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const n=new Rt().getNormalMatrix(t);i.applyNormalMatrix(n),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return X.makeRotationFromQuaternion(t),this.applyMatrix4(X),this}rotateX(t){return X.makeRotationX(t),this.applyMatrix4(X),this}rotateY(t){return X.makeRotationY(t),this.applyMatrix4(X),this}rotateZ(t){return X.makeRotationZ(t),this.applyMatrix4(X),this}translate(t,e,i){return X.makeTranslation(t,e,i),this.applyMatrix4(X),this}scale(t,e,i){return X.makeScale(t,e,i),this.applyMatrix4(X),this}lookAt(t){return Ae.lookAt(t),Ae.updateMatrix(),this.applyMatrix4(Ae.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Et).negate(),this.translate(Et.x,Et.y,Et.z),this}setFromPoints(t){const e=[];for(let i=0,s=t.length;i<s;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new as(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new g(-1/0,-1/0,-1/0),new g(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,s=e.length;i<s;i++){const n=e[i];v.setFromBufferAttribute(n),this.morphTargetsRelative?(N.addVectors(this.boundingBox.min,v.min),this.boundingBox.expandByPoint(N),N.addVectors(this.boundingBox.max,v.max),this.boundingBox.expandByPoint(N)):(this.boundingBox.expandByPoint(v.min),this.boundingBox.expandByPoint(v.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new g,1/0);return}if(t){const i=this.boundingSphere.center;if(v.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const a=e[n];It.setFromBufferAttribute(a),this.morphTargetsRelative?(N.addVectors(v.min,It.min),v.expandByPoint(N),N.addVectors(v.max,It.max),v.expandByPoint(N)):(v.expandByPoint(It.min),v.expandByPoint(It.max))}v.getCenter(i);let s=0;for(let n=0,r=t.count;n<r;n++)N.fromBufferAttribute(t,n),s=Math.max(s,i.distanceToSquared(N));if(e)for(let n=0,r=e.length;n<r;n++){const a=e[n],h=this.morphTargetsRelative;for(let o=0,l=a.count;o<l;o++)N.fromBufferAttribute(a,o),h&&(Et.fromBufferAttribute(t,o),N.add(Et)),s=Math.max(s,i.distanceToSquared(N))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.array,s=e.position.array,n=e.normal.array,r=e.uv.array,a=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Dt(new Float32Array(4*a),4));const h=this.getAttribute("tangent").array,o=[],l=[];for(let E=0;E<a;E++)o[E]=new g,l[E]=new g;const u=new g,f=new g,m=new g,d=new Q,p=new Q,x=new Q,y=new g,A=new g;function z(E,k,F){u.fromArray(s,E*3),f.fromArray(s,k*3),m.fromArray(s,F*3),d.fromArray(r,E*2),p.fromArray(r,k*2),x.fromArray(r,F*2),f.sub(u),m.sub(u),p.sub(d),x.sub(d);const T=1/(p.x*x.y-x.x*p.y);!isFinite(T)||(y.copy(f).multiplyScalar(x.y).addScaledVector(m,-p.y).multiplyScalar(T),A.copy(m).multiplyScalar(p.x).addScaledVector(f,-x.x).multiplyScalar(T),o[E].add(y),o[k].add(y),o[F].add(y),l[E].add(A),l[k].add(A),l[F].add(A))}let S=this.groups;S.length===0&&(S=[{start:0,count:i.length}]);for(let E=0,k=S.length;E<k;++E){const F=S[E],T=F.start,C=F.count;for(let B=T,I=T+C;B<I;B+=3)z(i[B+0],i[B+1],i[B+2])}const _=new g,b=new g,M=new g,D=new g;function R(E){M.fromArray(n,E*3),D.copy(M);const k=o[E];_.copy(k),_.sub(M.multiplyScalar(M.dot(k))).normalize(),b.crossVectors(D,k);const T=b.dot(l[E])<0?-1:1;h[E*4]=_.x,h[E*4+1]=_.y,h[E*4+2]=_.z,h[E*4+3]=T}for(let E=0,k=S.length;E<k;++E){const F=S[E],T=F.start,C=F.count;for(let B=T,I=T+C;B<I;B+=3)R(i[B+0]),R(i[B+1]),R(i[B+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Dt(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let f=0,m=i.count;f<m;f++)i.setXYZ(f,0,0,0);const s=new g,n=new g,r=new g,a=new g,h=new g,o=new g,l=new g,u=new g;if(t)for(let f=0,m=t.count;f<m;f+=3){const d=t.getX(f+0),p=t.getX(f+1),x=t.getX(f+2);s.fromBufferAttribute(e,d),n.fromBufferAttribute(e,p),r.fromBufferAttribute(e,x),l.subVectors(r,n),u.subVectors(s,n),l.cross(u),a.fromBufferAttribute(i,d),h.fromBufferAttribute(i,p),o.fromBufferAttribute(i,x),a.add(l),h.add(l),o.add(l),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(p,h.x,h.y,h.z),i.setXYZ(x,o.x,o.y,o.z)}else for(let f=0,m=e.count;f<m;f+=3)s.fromBufferAttribute(e,f+0),n.fromBufferAttribute(e,f+1),r.fromBufferAttribute(e,f+2),l.subVectors(r,n),u.subVectors(s,n),l.cross(u),i.setXYZ(f+0,l.x,l.y,l.z),i.setXYZ(f+1,l.x,l.y,l.z),i.setXYZ(f+2,l.x,l.y,l.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(t.attributes[s]===void 0)continue;const r=i[s].array,a=t.attributes[s],h=a.array,o=a.itemSize*e,l=Math.min(h.length,r.length-o);for(let u=0,f=o;u<l;u++,f++)r[f]=h[u]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)N.fromBufferAttribute(t,e),N.normalize(),t.setXYZ(e,N.x,N.y,N.z)}toNonIndexed(){function t(a,h){const o=a.array,l=a.itemSize,u=a.normalized,f=new o.constructor(h.length*l);let m=0,d=0;for(let p=0,x=h.length;p<x;p++){a.isInterleavedBufferAttribute?m=h[p]*a.data.stride+a.offset:m=h[p]*l;for(let y=0;y<l;y++)f[d++]=o[m++]}return new Dt(f,l,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Pe,i=this.index.array,s=this.attributes;for(const a in s){const h=s[a],o=t(h,i);e.setAttribute(a,o)}const n=this.morphAttributes;for(const a in n){const h=[],o=n[a];for(let l=0,u=o.length;l<u;l++){const f=o[l],m=t(f,i);h.push(m)}e.morphAttributes[a]=h}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let a=0,h=r.length;a<h;a++){const o=r[a];e.addGroup(o.start,o.count,o.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const o in h)h[o]!==void 0&&(t[o]=h[o]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const h in i){const o=i[h];t.data.attributes[h]=o.toJSON(t.data)}const s={};let n=!1;for(const h in this.morphAttributes){const o=this.morphAttributes[h],l=[];for(let u=0,f=o.length;u<f;u++){const m=o[u];l.push(m.toJSON(t.data))}l.length>0&&(s[h]=l,n=!0)}n&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone(e));const s=t.attributes;for(const o in s){const l=s[o];this.setAttribute(o,l.clone(e))}const n=t.morphAttributes;for(const o in n){const l=[],u=n[o];for(let f=0,m=u.length;f<m;f++)l.push(u[f].clone(e));this.morphAttributes[o]=l}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let o=0,l=r.length;o<l;o++){const u=r[o];this.addGroup(u.start,u.count,u.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}class hs extends ss{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yi,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fi}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fi);new Pe;new hs;const Rs=new g,Ls=new g,Ns=new Rt;function ls(c){return c<.5?4*c*c*c:.5*Math.pow(2*c-2,3)+1}function cs(c){return c/=.5,c<1?.5*c*c:(c--,-.5*(c*(c-2)-1))}function Ke(c){return Object.prototype.toString.call(c)==="[object Date]"}function Te(c,t,e,i){if(typeof e=="number"||Ke(e)){const s=i-e,n=(e-t)/(c.dt||1/60),r=c.opts.stiffness*s,a=c.opts.damping*n,h=(r-a)*c.inv_mass,o=(n+h)*c.dt;return Math.abs(o)<c.opts.precision&&Math.abs(s)<c.opts.precision?i:(c.settled=!1,Ke(e)?new Date(e.getTime()+o):e+o)}else{if(Array.isArray(e))return e.map((s,n)=>Te(c,t[n],e[n],i[n]));if(typeof e=="object"){const s={};for(const n in e)s[n]=Te(c,t[n],e[n],i[n]);return s}else throw new Error(`Cannot spring ${typeof e} values`)}}function Fe(c,t={}){const e=jt(c),{stiffness:i=.15,damping:s=.8,precision:n=.01}=t;let r,a,h,o=c,l=c,u=1,f=0,m=!1;function d(x,y={}){l=x;const A=h={};if(c==null||y.hard||p.stiffness>=1&&p.damping>=1)return m=!0,r=Ee(),o=x,e.set(c=l),Promise.resolve();if(y.soft){const z=y.soft===!0?.5:+y.soft;f=1/(z*60),u=0}return a||(r=Ee(),m=!1,a=ni(z=>{if(m)return m=!1,a=null,!1;u=Math.min(u+f,1);const S={inv_mass:u,opts:p,settled:!0,dt:(z-r)*60/1e3},_=Te(S,o,c,l);return r=z,o=c,e.set(c=_),S.settled&&(a=null),!S.settled})),new Promise(z=>{a.promise.then(()=>{A===h&&z()})})}const p={set:d,update:(x,y)=>d(x(l,c),y),subscribe:e.subscribe,stiffness:i,damping:s,precision:n};return p}function us(c=new Set){const t=jt(c),e=i=>(...s)=>{let n;return t.update(r=>(n=r[i](...s),r)),n};return{...t,add:e("add"),delete:e("delete")}}const xi={},ke=(c,t,e)=>c<t?t:c>e?e:c;let gi=!1;try{let c=Object.defineProperty({},"passive",{get:function(){gi=!0}});window.addEventListener("test",null,c)}catch{}const J={$(c){return typeof c=="string"?document.querySelector(c):c},extend(...c){return Object.assign(...c)},addListeners(c,t,e,i={passive:!1}){t instanceof Array||(t=[t]);for(let s=0;s<t.length;s++)c.addEventListener(t[s],e,gi?i:!1)},removeListeners(c,t,e){t instanceof Array||(t=[t]);for(let i=0;i<t.length;i++)c.removeEventListener(t[i],e)},cumulativeOffset(c){let t=0,e=0;do t+=c.offsetTop||0,e+=c.offsetLeft||0,c=c.offsetParent;while(c);return{top:t,left:e}},directScroll(c){return c&&c!==document&&c!==document.body},scrollTop(c,t){let e=t!==void 0;return this.directScroll(c)?e?c.scrollTop=t:c.scrollTop:e?document.documentElement.scrollTop=document.body.scrollTop=t:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},scrollLeft(c,t){let e=t!==void 0;return this.directScroll(c)?e?c.scrollLeft=t:c.scrollLeft:e?document.documentElement.scrollLeft=document.body.scrollLeft=t:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}},ds={container:"body",duration:500,delay:0,offset:0,easing:ls,onStart:lt,onDone:lt,onAborting:lt,scrollX:!1,scrollY:!0},$e=["mousedown","wheel","DOMMouseScroll","mousewheel","keydown","touchmove"],fs=c=>{let{offset:t,duration:e,delay:i,easing:s,x:n=0,y:r=0,scrollX:a,scrollY:h,onStart:o,onDone:l,container:u,onAborting:f,element:m}=c;typeof t=="function"&&(t=t());const d=J.cumulativeOffset(u),p=m?J.cumulativeOffset(m):{top:r,left:n},x=J.scrollLeft(u),y=J.scrollTop(u),A=p.left-d.left+t,z=p.top-d.top+t,S=A-x,_=z-y;let b=!0,M=!1,D=Ee()+i,R=D+e;function E(C,B,I){a&&J.scrollLeft(C,I),h&&J.scrollTop(C,B)}function k(C){C||(M=!0,o(m,{x:n,y:r})),J.addListeners(u,$e,T,{passive:!0})}function F(C){E(u,y+_*C,x+S*C)}function T(){b=!1,J.removeListeners(u,$e,T)}return ni(C=>{if(!M&&C>=D&&k(!1),M&&C>=R)return F(1),T(),l(m,{x:n,y:r}),!1;if(!b)return f(m,{x:n,y:r}),!1;if(M){const B=C-D,I=0+1*s(B/e);F(I)}return!0}),k(i),F(0),T},ms=c=>{let t=J.extend({},ds,c);return t.container=J.$(t.container),t.element=J.$(t.element),t},ps=c=>fs(ms(c));(function(){if(!(typeof window>"u"||typeof document>"u"||typeof HTMLElement>"u")){var c=!1;try{var t=document.createElement("div");t.addEventListener("focus",function(n){n.preventDefault(),n.stopPropagation()},!0),t.focus(Object.defineProperty({},"preventScroll",{get:function(){if(navigator&&typeof navigator.userAgent<"u"&&navigator.userAgent&&navigator.userAgent.match(/Edge\/1[7-8]/))return c=!1;c=!0}}))}catch{}if(HTMLElement.prototype.nativeFocus===void 0&&!c){HTMLElement.prototype.nativeFocus=HTMLElement.prototype.focus;var e=function(n){for(var r=n.parentNode,a=[],h=document.scrollingElement||document.documentElement;r&&r!==h;)(r.offsetHeight<r.scrollHeight||r.offsetWidth<r.scrollWidth)&&a.push([r,r.scrollTop,r.scrollLeft]),r=r.parentNode;return r=h,a.push([r,r.scrollTop,r.scrollLeft]),a},i=function(n){for(var r=0;r<n.length;r++)n[r][0].scrollTop=n[r][1],n[r][0].scrollLeft=n[r][2];n=[]},s=function(n){if(n&&n.preventScroll){var r=e(this);if(typeof setTimeout=="function"){var a=this;setTimeout(function(){a.nativeFocus(),i(r)},0)}else this.nativeFocus(),i(r)}else this.nativeFocus()};HTMLElement.prototype.focus=s}}})();const{scrollTo:ys,setTimeout:ti,window:Bt}=zi;function xs(c){let t=!1,e=()=>{t=!1},i,s,n,r,a,h,o;Re(c[26]),Re(c[27]);const l=c[24].default,u=ri(l,c,c[23],null);let f=[c[12],{class:n="parallax-container "+(c[12].class?c[12].class:"")},{style:r="height: "+c[1]*c[0]+"px; "+(c[12].style?c[12].style:"")+";"}],m={};for(let d=0;d<f.length;d+=1)m=Ot(m,f[d]);return{c(){s=ct("div"),u&&u.c(),this.h()},l(d){s=ut(d,"DIV",{class:!0,style:!0});var p=dt(s);u&&u.l(p),p.forEach(O),this.h()},h(){oe(s,m),he(s,"svelte-15ph2c6",!0)},m(d,p){H(d,s,p),u&&u.m(s,null),c[28](s),a=!0,h||(o=[Wt(Bt,"resize",c[25]),Wt(Bt,"scroll",()=>{t=!0,clearTimeout(i),i=ti(e,100),c[26]()}),Wt(Bt,"resize",c[27])],h=!0)},p(d,[p]){p&16&&!t&&(t=!0,clearTimeout(i),ys(Bt.pageXOffset,d[4]),i=ti(e,100)),u&&u.p&&(!a||p&8388608)&&ai(u,l,d,d[23],a?hi(l,d[23],p,null):oi(d[23]),null),oe(s,m=li(f,[p&4096&&d[12],(!a||p&4096&&n!==(n="parallax-container "+(d[12].class?d[12].class:"")))&&{class:n},(!a||p&4099&&r!==(r="height: "+d[1]*d[0]+"px; "+(d[12].style?d[12].style:"")+";"))&&{style:r}])),he(s,"svelte-15ph2c6",!0)},i(d){a||(it(u,d),a=!0)},o(d){st(u,d),a=!1},d(d){d&&O(s),u&&u.d(d),c[28](null),h=!1,wi(o)}}}function gs(c,t,e){const i=["sections","sectionHeight","config","threshold","onProgress","onScroll","disabled","scrollTo"];let s=le(t,i),n,r,a,h,o,l,{$$slots:u={},$$scope:f}=t,m,d,{sections:p=1}=t,{sectionHeight:x=void 0}=t,{config:y={stiffness:.017,damping:.26}}=t,{threshold:A={top:1,bottom:1}}=t,{onProgress:z=void 0}=t,{onScroll:S=void 0}=t,{disabled:_=!1}=t;const b=jt(0);ot(c,b,w=>e(4,l=w));const M=jt(0);ot(c,M,w=>e(29,r=w));const D=jt(0);ot(c,D,w=>e(1,n=w));const R=Fe(void 0,{...y,precision:.001});ot(c,R,w=>e(22,o=w));const E=ki([b,M,D],([w,Y,W],pe)=>{const Gt=w-Y,Jt=0-W+W*A.top,bi=W*p-W*A.bottom,Mi=ke(Gt,Jt,bi);pe(Mi)});ot(c,E,w=>e(20,a=w));const k=(w,Y)=>{if(Y===0){R.set(0);return}const W=Y*p-Y;R.set(ke(w/W,0,1))},F=us(new Set);ot(c,F,w=>e(21,h=w)),_i(xi,{config:y,addLayer:w=>{F.add(w)},removeLayer:w=>{F.delete(w)}}),ci(()=>{T()});const T=()=>{D.set(x||d),M.set(m.getBoundingClientRect().top+window.pageYOffset)};function C(w,{selector:Y="",duration:W=500,easing:pe=cs}={}){const Gt=r+n*(w-1),Jt=()=>{document.querySelector(Y).focus({preventScroll:!0})};if(_){window.scrollTo({top:Gt}),Y&&Jt();return}ps({y:Gt,duration:W,easing:pe,onDone:Y?Jt:()=>{}})}const B=()=>setTimeout(T,0);function I(){b.set(l=Bt.pageYOffset)}function gt(){e(3,d=Bt.innerHeight)}function bt(w){di[w?"unshift":"push"](()=>{m=w,e(2,m)})}return c.$$set=w=>{t=Ot(Ot({},t),ui(w)),e(12,s=le(t,i)),"sections"in w&&e(0,p=w.sections),"sectionHeight"in w&&e(13,x=w.sectionHeight),"config"in w&&e(14,y=w.config),"threshold"in w&&e(15,A=w.threshold),"onProgress"in w&&e(16,z=w.onProgress),"onScroll"in w&&e(17,S=w.onScroll),"disabled"in w&&e(18,_=w.disabled),"$$scope"in w&&e(23,f=w.$$scope)},c.$$.update=()=>{c.$$.dirty&1179648&&S&&S(a),c.$$.dirty&1114114&&z&&k(a,n),c.$$.dirty&4259840&&z&&z(o!=null?o:0),c.$$.dirty&2097154&&h.forEach(w=>{w.setHeight(n)}),c.$$.dirty&3407874&&h.forEach(w=>{w.setPosition(a,n,_)}),c.$$.dirty&8194&&n!==0&&T()},[p,n,m,d,l,b,M,D,R,E,F,T,s,x,y,A,z,S,_,C,a,h,o,f,u,B,I,gt,bt]}class bs extends Ce{constructor(t){super(),Be(this,t,gs,xs,De,{sections:0,sectionHeight:13,config:14,threshold:15,onProgress:16,onScroll:17,disabled:18,scrollTo:19})}get scrollTo(){return this.$$.ctx[19]}}const Ms=c=>({progress:c&1}),ei=c=>({progress:c[0]});function ws(c){let t,e,i,s;const n=c[12].default,r=ri(n,c,c[11],ei);let a=[c[5],{class:e="parallax-layer "+(c[5].class?c[5].class:"")},{style:i=""+(c[5].style?c[5].style:"")+"; height: "+c[1]+"px; -ms-transform: "+c[2]+"; -webkit-transform: "+c[2]+"; transform: "+c[2]+";"}],h={};for(let o=0;o<a.length;o+=1)h=Ot(h,a[o]);return{c(){t=ct("div"),r&&r.c(),this.h()},l(o){t=ut(o,"DIV",{class:!0,style:!0});var l=dt(t);r&&r.l(l),l.forEach(O),this.h()},h(){oe(t,h),he(t,"svelte-qcp0z5",!0)},m(o,l){H(o,t,l),r&&r.m(t,null),s=!0},p(o,[l]){r&&r.p&&(!s||l&2049)&&ai(r,n,o,o[11],s?hi(n,o[11],l,Ms):oi(o[11]),ei),oe(t,h=li(a,[l&32&&o[5],(!s||l&32&&e!==(e="parallax-layer "+(o[5].class?o[5].class:"")))&&{class:e},(!s||l&38&&i!==(i=""+(o[5].style?o[5].style:"")+"; height: "+o[1]+"px; -ms-transform: "+o[2]+"; -webkit-transform: "+o[2]+"; transform: "+o[2]+";"))&&{style:i}])),he(t,"svelte-qcp0z5",!0)},i(o){s||(it(r,o),s=!0)},o(o){st(r,o),s=!1},d(o){o&&O(t),r&&r.d(o)}}}function _s(c,t,e){let i;const s=["rate","offset","span","onProgress"];let n=le(t,s),r,a,{$$slots:h={},$$scope:o}=t,{rate:l=.5}=t,{offset:u=0}=t,{span:f=1}=t,{onProgress:m=void 0}=t;const{config:d,addLayer:p,removeLayer:x}=Si(xi),y=Fe(void 0,d);ot(c,y,b=>e(10,a=b));const A=Fe(void 0,{...d,precision:.001});ot(c,A,b=>e(0,r=b));let z;const S={setPosition:(b,M,D)=>{if(D){y.set(u*M,{hard:!0});return}const R=Math.floor(u)*M,E=u*M+R*l;y.set(-(b*l)+E),A.set(_(b,l,E,M))},setHeight:b=>{e(1,z=f*b)}},_=(b,M,D,R)=>{const E=M+1,k=D/E,F=M>=0?1:-1,T=R/E*F,C=k-T,B=k+T*f,I=(b-C)/(B-C);return ke(I,0,1)};return ci(()=>(p(S),()=>{x(S)})),c.$$set=b=>{t=Ot(Ot({},t),ui(b)),e(5,n=le(t,s)),"rate"in b&&e(6,l=b.rate),"offset"in b&&e(7,u=b.offset),"span"in b&&e(8,f=b.span),"onProgress"in b&&e(9,m=b.onProgress),"$$scope"in b&&e(11,o=b.$$scope)},c.$$.update=()=>{c.$$.dirty&1024&&e(2,i=`translate3d(0px, ${a}px, 0px);`),c.$$.dirty&513&&m&&m(r!=null?r:0)},[r,z,i,y,A,n,l,u,f,m,a,o,h]}class Ht extends Ce{constructor(t){super(),Be(this,t,_s,ws,De,{rate:6,offset:7,span:8,onProgress:9})}}function ii(c,t,e){const i=c.slice();return i[5]=t[e],i[7]=e,i}function zs(c){let t,e=c[5]+"",i;return{c(){t=ct("p"),i=ce(e),this.h()},l(s){t=ut(s,"P",{class:!0});var n=dt(t);i=ue(n,e),n.forEach(O),this.h()},h(){de(t,"class","fancy svelte-ta21go")},m(s,n){H(s,t,n),fe(t,i)},p:lt,d(s){s&&O(t)}}}function si(c,t){let e,i,s;return i=new Ht({props:{rate:(t[7]+1)/(t[1].length-1),offset:1,style:`
			  margin-left: `+(38+t[7]*5)+`%; 
				display: flex; 
				justify-content: flex-start; 
				align-items: center;
		  `,$$slots:{default:[zs]},$$scope:{ctx:t}}}),{key:c,first:null,c(){e=Le(),Tt(i.$$.fragment),this.h()},l(n){e=Le(),Ft(i.$$.fragment,n),this.h()},h(){this.first=e},m(n,r){H(n,e,r),kt(i,n,r),s=!0},p(n,r){t=n;const a={};r&256&&(a.$$scope={dirty:r,ctx:t}),i.$set(a)},i(n){s||(it(i.$$.fragment,n),s=!0)},o(n){st(i.$$.fragment,n),s=!1},d(n){n&&O(e),Ct(i,n)}}}function Ss(c){let t;return{c(){t=ct("div"),this.h()},l(e){t=ut(e,"DIV",{style:!0}),dt(t).forEach(O),this.h()},h(){ht(t,"background-color","lightblue"),ht(t,"opacity","0.5"),ht(t,"width","50%"),ht(t,"height","100%")},m(e,i){H(e,t,i)},p:lt,d(e){e&&O(t)}}}function As(c){let t;return{c(){t=ct("div"),this.h()},l(e){t=ut(e,"DIV",{style:!0}),dt(t).forEach(O),this.h()},h(){ht(t,"background-color","yellow"),ht(t,"opacity","0.5"),ht(t,"width","50%"),ht(t,"height","100%")},m(e,i){H(e,t,i)},p:lt,d(e){e&&O(t)}}}function Es(c){let t,e,i,s,n,r,a;return{c(){t=ct("h1"),e=ce("story traversal!"),i=qt(),s=ct("button"),n=ce("Click me!"),this.h()},l(h){t=ut(h,"H1",{class:!0});var o=dt(t);e=ue(o,"story traversal!"),o.forEach(O),i=Yt(h),s=ut(h,"BUTTON",{class:!0});var l=dt(s);n=ue(l,"Click me!"),l.forEach(O),this.h()},h(){de(t,"class","svelte-ta21go"),de(s,"class","bottom-btn svelte-ta21go")},m(h,o){H(h,t,o),fe(t,e),H(h,i,o),H(h,s,o),fe(s,n),r||(a=Wt(s,"click",c[2]),r=!0)},p:lt,d(h){h&&O(t),h&&O(i),h&&O(s),r=!1,a()}}}function Ts(c){let t,e,i,s;return{c(){t=ct("button"),e=ce("Scroll to top"),this.h()},l(n){t=ut(n,"BUTTON",{class:!0});var r=dt(t);e=ue(r,"Scroll to top"),r.forEach(O),this.h()},h(){de(t,"class","top-btn svelte-ta21go")},m(n,r){H(n,t,r),fe(t,e),i||(s=Wt(t,"click",c[3]),i=!0)},p:lt,d(n){n&&O(t),i=!1,s()}}}function Fs(c){let t=[],e=new Map,i,s,n,r,a,h,o,l,u,f=c[1];const m=d=>d[7];for(let d=0;d<f.length;d+=1){let p=ii(c,f,d),x=m(p);e.set(x,t[d]=si(x,p))}return s=new Ht({props:{offset:1,rate:-2.5,style:"display: flex; justify-content: flex-end;",$$slots:{default:[Ss]},$$scope:{ctx:c}}}),r=new Ht({props:{offset:1,rate:2.5,style:"display: flex; justify-content: flex-start;",$$slots:{default:[As]},$$scope:{ctx:c}}}),h=new Ht({props:{rate:"1",style:`
		  background-color: pink; 
			display: flex; 
			justify-content: center; 
			align-items: center; 
			flex-direction: column;
		`,$$slots:{default:[Es]},$$scope:{ctx:c}}}),l=new Ht({props:{offset:"2",rate:"2",style:`
		  background-color: pink; 
			display: flex; 
			justify-content: center; 
			align-items: center;
		`,$$slots:{default:[Ts]},$$scope:{ctx:c}}}),{c(){for(let d=0;d<t.length;d+=1)t[d].c();i=qt(),Tt(s.$$.fragment),n=qt(),Tt(r.$$.fragment),a=qt(),Tt(h.$$.fragment),o=qt(),Tt(l.$$.fragment)},l(d){for(let p=0;p<t.length;p+=1)t[p].l(d);i=Yt(d),Ft(s.$$.fragment,d),n=Yt(d),Ft(r.$$.fragment,d),a=Yt(d),Ft(h.$$.fragment,d),o=Yt(d),Ft(l.$$.fragment,d)},m(d,p){for(let x=0;x<t.length;x+=1)t[x].m(d,p);H(d,i,p),kt(s,d,p),H(d,n,p),kt(r,d,p),H(d,a,p),kt(h,d,p),H(d,o,p),kt(l,d,p),u=!0},p(d,p){p&2&&(f=d[1],Ai(),t=Ei(t,p,m,1,d,f,e,i.parentNode,Ti,si,i,ii),Fi());const x={};p&256&&(x.$$scope={dirty:p,ctx:d}),s.$set(x);const y={};p&256&&(y.$$scope={dirty:p,ctx:d}),r.$set(y);const A={};p&257&&(A.$$scope={dirty:p,ctx:d}),h.$set(A);const z={};p&257&&(z.$$scope={dirty:p,ctx:d}),l.$set(z)},i(d){if(!u){for(let p=0;p<f.length;p+=1)it(t[p]);it(s.$$.fragment,d),it(r.$$.fragment,d),it(h.$$.fragment,d),it(l.$$.fragment,d),u=!0}},o(d){for(let p=0;p<t.length;p+=1)st(t[p]);st(s.$$.fragment,d),st(r.$$.fragment,d),st(h.$$.fragment,d),st(l.$$.fragment,d),u=!1},d(d){for(let p=0;p<t.length;p+=1)t[p].d(d);d&&O(i),Ct(s,d),d&&O(n),Ct(r,d),d&&O(a),Ct(h,d),d&&O(o),Ct(l,d)}}}function ks(c){let t,e,i={sections:3,disabled:Cs,$$slots:{default:[Fs]},$$scope:{ctx:c}};return t=new bs({props:i}),c[4](t),{c(){Tt(t.$$.fragment)},l(s){Ft(t.$$.fragment,s)},m(s,n){kt(t,s,n),e=!0},p(s,[n]){const r={};n&257&&(r.$$scope={dirty:n,ctx:s}),t.$set(r)},i(s){e||(it(t.$$.fragment,s),e=!0)},o(s){st(t.$$.fragment,s),e=!1},d(s){c[4](null),Ct(t,s)}}}let Cs=!1;function Bs(c,t,e){let i,s="fancy".split("");const n=()=>i.scrollTo(3,{selector:".top-btn",duration:4e3}),r=()=>i.scrollTo(1,{selector:".bottom-btn",duration:1e3});function a(h){di[h?"unshift":"push"](()=>{i=h,e(0,i)})}return[i,s,n,r,a]}class Is extends Ce{constructor(t){super(),Be(this,t,Bs,ks,De,{})}}export{Is as default};
